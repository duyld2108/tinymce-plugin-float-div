tinymce.PluginManager.add("custombox",(function(t,n){function e(n={}){console.log("existingData",n),t.windowManager.open({title:n.isEdit?"Edit Custom Box":"Insert Custom Box",body:{type:"tabpanel",tabs:[{name:"general",title:"General",items:[{type:"colorinput",name:"backgroundColor",label:"Background Color"},{type:"colorinput",name:"borderColor",label:"Border Color"},{type:"input",name:"borderWidth",label:"Border Width (px)",inputMode:"numeric"},{type:"input",name:"width",label:"Box Width (%, px)",placeholder:"e.g., 100% or 300px"},{type:"listbox",name:"floatPosition",label:"Float Position",items:[{text:"None",value:"none"},{text:"Left",value:"left"},{text:"Right",value:"right"},{text:"Right",value:"right"}]}]},{name:"advanced",title:"Advanced",items:[{type:"grid",columns:2,items:[{type:"input",name:"paddingTop",label:"Padding Top (px)",inputMode:"numeric"},{type:"input",name:"paddingBottom",label:"Padding Bottom (px)",inputMode:"numeric"},{type:"input",name:"paddingLeft",label:"Padding Left (px)",inputMode:"numeric"},{type:"input",name:"paddingRight",label:"Padding Right (px)",inputMode:"numeric"}]},{type:"grid",columns:2,label:"Margin (px)",items:[{type:"input",name:"marginTop",label:"Margin Top (px)",inputMode:"numeric"},{type:"input",name:"marginBottom",label:"Margin Bottom (px)",inputMode:"numeric"},{type:"input",name:"marginLeft",label:"Margin Left (px)",inputMode:"numeric"},{type:"input",name:"marginRight",label:"Margin Right (px)",inputMode:"numeric"}]},{type:"input",name:"fontSize",label:"Font Size (px)",inputMode:"numeric"}]}]},buttons:[{type:"cancel",text:"Cancel"},{type:"submit",text:n.isEdit?"Update":"Insert",primary:!0}],initialData:{backgroundColor:n.backgroundColor?.toString()||"#7E8C8D",borderColor:n.borderColor?.toString()||"#2D2D2D",borderWidth:n.borderWidth?.toString()||"2",paddingTop:n.paddingTop?.toString()||"10",paddingBottom:n.paddingBottom?.toString()||"10",paddingLeft:n.paddingLeft?.toString()||"10",paddingRight:n.paddingRight?.toString()||"10",marginTop:n.marginTop?.toString()||"10",marginBottom:n.marginBottom?.toString()||"10",marginLeft:n.marginLeft?.toString()||"10",marginRight:n.marginRight?.toString()||"10",width:n.width?.toString()||"auto",fontSize:n.fontSize?.toString()||"14"},onSubmit:function(e){const o=e.getData();console.log(o);const i=n.element?n.element.innerHTML.replace('<br data-mce-bogus="1">',""):null,a=`<div style="background-color:${o.backgroundColor};border:${o.borderWidth}px solid ${o.borderColor};float:${o.floatPosition};padding-top:${o.paddingTop}px;padding-right:${o.paddingRight}px;padding-bottom:${o.paddingBottom}px;padding-left:${o.paddingLeft}px;margin-top:${o.marginTop}px;margin-right:${o.marginRight}px;margin-bottom:${o.marginBottom}px;margin-left:${o.marginLeft}px;width:${o.width};font-size: ${o.fontSize}px" class="custom-box">${i||"Your content here ..."}</div>`;console.log("customDiv",a),n.isEdit?(console.log("1"),t.dom.setOuterHTML(n.element,a)):(console.log("2"),t.insertContent(a)),e.close()}})}function o(t){if("#"===t.substr(0,1))return t;var n=/(.*?)rgb\((\d+), (\d+), (\d+)\)/.exec(t),e=parseInt(n[2]),o=parseInt(n[3]),i=parseInt(n[4])|o<<8|e<<16;return n[1]+"#"+i.toString(16)}return t.ui.registry.addButton("custombox",{icon:"custom-box",tooltip:"Insert or Edit Box",onAction:function(){const n=t.selection.getNode();console.log("selectedNode",n);e(n&&"DIV"===n.tagName&&"custom-box"===n.className?{isEdit:!0,element:n,backgroundColor:n.style.backgroundColor?o(n.style.backgroundColor):"#7E8C8D",borderColor:n.style.borderColor?o(n.style.borderColor):"#2D2D2D",borderWidth:parseInt(n.style.borderWidth,10)||2,paddingTop:parseInt(n.style.paddingTop,10)||10,paddingBottom:parseInt(n.style.paddingBottom,10)||10,paddingLeft:parseInt(n.style.paddingLeft,10)||10,paddingRight:parseInt(n.style.paddingRight,10)||10,marginTop:parseInt(n.style.marginTop,10)||10,marginbottom:parseInt(n.style.marginbottom,10)||10,marginLeft:parseInt(n.style.marginLeft,10)||10,marginRight:parseInt(n.style.marginRight,10)||10,width:n.style.width||"auto",floatPosition:n.style.float||"none",fontSize:parseInt(n.style.fontSize,10)||14}:{element:n})}}),{getMetadata:function(){return{name:"Custom Box Plugin",url:"https://github.com/duyld2108/tinymce-plugin-float-div"}}}}));
